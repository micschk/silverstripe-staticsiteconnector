# SilverStripe Static Site Connector

## Authors

* [Sam Minnee](https://github.com/sminnee)
* [Russell Michell](https://github.com/phptek)
* [Mike Parkhill](https://github.com/mparkhill)
* [Stig Lindqvist](https://github.com/stojg)

## Introduction

This module extends the CMS and allows you to extract content from another website by crawling and parsing its DOM structure, rather than connecting to an internal API or database.

Although this has the disadvantage of leaving it unable to extract any information or structure not represented in the outputted markup of the site, it requires no special access, nor does it rely on particular back-end systems. This makes it suited for experimental and legacy site-imports, as well as connections to websites generated by obscure CMS's.

## How it works

To import a site is a 2 or 3 step process (Depending on user-selection).

 1. Crawl
 2. Import
 3. Rewrite Links (Automatic, if selected in step 2.)
 
A list of URLs are fetched and extracted from the site using [PHPCrawl](http://cuab.de/), and cached in a text file under the assets directory.

Each cached URL corresponds to a page that the module will attempt to import into native SilverStripe objects e.g. SiteTree.

Page content is imported page-by-page using CURL, and the desired DOM elements extracted via configurable CSS selectors. [phpQuery](http://code.google.com/p/phpquery/) is used for this purpose.

## Migration

See the [included docs](docs/en/migration.md) for detailed information on migrating a legacy site into SilverStripe using the StaticSiteConnector module.

## Installation

This module requires the [PHP Sempahore](http://php.net/manual/en/book.sem.php) functions.
These are installed by default on Debian and some OS X PHP distributions, but if you're using Macports you'll need to add the `+ipc` flag when installing php5.

If compiling PHP from source you need to pass three additional flags to PHP's configure script:

	./configure <usual flags> '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg'

Once that's done, you can use [Composer](http://getcomposer.org) to add the module to your SilverStripe project:

    #> composer require silverstripe/staticsiteconnector

Please see the included [Migration](docs/en/migration.md) document, that describes exactly how to configure the tool to perform a site-scrape / migration.

There is also an [example database-dump](docs/en/example.sql) (MySQL/MariaDB only) provided which you can import into your DB to get you up and running quickly.

License
-------

This code is available under the BSD license, with the exception of the [PHPCrawl](http://cuab.de/) library, bundled with this module which is GPL version 2.
